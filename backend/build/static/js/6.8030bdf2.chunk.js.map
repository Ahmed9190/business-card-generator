{"version":3,"sources":["components/custom-input/custom-input.jsx","pages/handle-card/handle-card.jsx"],"names":["CustomInput","Icon","activedIcon","onClickIcon","password","props","className","type","onClick","width","height","fill","HandleCard","useState","selectedColorIndex","setSelectedColorIndex","hasWhatsapp","setHasWhatsapp","cardData","setCardData","useHistory","push","pathname","location","isEditing","includes","useEffect","localStorage","getItem","Toast","axios","post","headers","then","data","has_whatsapp","color_index","myCardData","c_id","u_id","catch","e","resonse","solid","style","backgroundColor","color","cardColors","map","index","borderRadius","cursor","border","borderColor","borderWidth","onSubmit","preventDefault","put","res","response","cardInputsData","key","onChange","target","name","value","text","gridColumnStart","gridColumnEnd","delete"],"mappings":"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","file":"static/js/6.8030bdf2.chunk.js","sourcesContent":["import \"./custom-input.scss\";\r\nimport React from \"react\";\r\n\r\nconst CustomInput = ({\r\n  Icon,\r\n  activedIcon,\r\n  onClickIcon,\r\n  password,\r\n  ...props\r\n}) => (\r\n  <div className=\"custom-input-container\">\r\n    <input\r\n      className=\"custom-input\"\r\n      type={password ? \"password\" : null}\r\n      {...props}\r\n    />\r\n    {Icon && (\r\n      <Icon\r\n        onClick={onClickIcon}\r\n        className=\"input-icon\"\r\n        width=\"20px\"\r\n        height=\"20px\"\r\n        fill={activedIcon ? \"#102840\" : \"#1028407E\"}\r\n      />\r\n    )}\r\n  </div>\r\n);\r\n\r\nexport default CustomInput;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport Header from \"./../../components/header/header\";\r\nimport \"./handle-card.scss\";\r\nimport CustomInput from \"./../../components/custom-input/custom-input\";\r\nimport CustomButton from \"../../components/custom-button/custom-button\";\r\nimport { cardColors, cardInputsData } from \"./handle-card-data\";\r\nimport Card from \"./../../components/card/card\";\r\nimport axios from \"axios\";\r\nimport Toast from \"../../utils/toastify\";\r\nimport { headers } from \"./../../utils/axios\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nconst HandleCard = () => {\r\n  const [selectedColorIndex, setSelectedColorIndex] = useState(2);\r\n  const [hasWhatsapp, setHasWhatsapp] = useState(false);\r\n  const [cardData, setCardData] = useState({});\r\n  const {\r\n    push,\r\n    location: { pathname },\r\n  } = useHistory();\r\n\r\n  let isEditing = pathname.includes(\"edit\");\r\n\r\n  useEffect(() => {\r\n    if (!localStorage.getItem(\"jwt\")) {\r\n      Toast(\"You have to sign in first\", \"warning\");\r\n      push(\"/account/signin\");\r\n    }\r\n    if (isEditing)\r\n      axios\r\n        .post(\"/read-my-card\", {}, headers)\r\n        .then(\r\n          ({\r\n            data: { has_whatsapp, color_index, c_id, u_id, ...myCardData },\r\n          }) => {\r\n            setSelectedColorIndex(color_index);\r\n            setHasWhatsapp(has_whatsapp);\r\n            setCardData(myCardData);\r\n          }\r\n        )\r\n        .catch((e) => Toast(e.resonse.data, \"error\"));\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [isEditing, pathname]);\r\n\r\n  const onClickWhatsappIcon = () => setHasWhatsapp(!hasWhatsapp);\r\n\r\n  const handleDelete = () => {\r\n    axios\r\n      .delete(\"/delete-card\", headers)\r\n      .then(({ data: res }) => Toast(res))\r\n      .then(() => push(\"/\"))\r\n      .catch((e) => Toast(e.response.data, \"error\"));\r\n  };\r\n\r\n  const create = () => {\r\n    axios\r\n      .post(\r\n        \"/create-card\",\r\n        {\r\n          color_index: selectedColorIndex,\r\n          ...{ has_whatsapp: +hasWhatsapp },\r\n          ...cardData,\r\n        },\r\n        headers\r\n      )\r\n      .then(({ data: res }) => {\r\n        Toast(res);\r\n        push(\"/\");\r\n      })\r\n      .catch((e) => Toast(e.response.data, \"error\"));\r\n  };\r\n\r\n  const edit = () => {\r\n    axios\r\n      .put(\r\n        \"/update-card\",\r\n        {\r\n          color_index: selectedColorIndex,\r\n          ...{ has_whatsapp: +hasWhatsapp },\r\n          ...cardData,\r\n        },\r\n        headers\r\n      )\r\n      .then(({ data: res }) => {\r\n        Toast(res);\r\n        push(\"/\");\r\n      })\r\n      .catch((e) => Toast(e.response.data, \"error\"));\r\n  };\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    if (isEditing) edit();\r\n    else create();\r\n  };\r\n\r\n  //TO-DO: pathname.includes(\"edit\")&& he has card data redirect to home\r\n  return (\r\n    <div className=\"handle-card-page-container\">\r\n      <Header solid />\r\n      <div className=\"handle-card-page\">\r\n        <div className=\"handle-card-data-container\">\r\n          <div style={{ height: \"110px\" }}>\r\n            <div className=\"handled-card\" style={{ backgroundColor: `#fff` }}>\r\n              <Card\r\n                color={cardColors[selectedColorIndex]}\r\n                cardData={cardData}\r\n                hasWhatsapp={hasWhatsapp}\r\n              />\r\n            </div>\r\n          </div>\r\n          <div className=\"handle-card-colors-container\">\r\n            {cardColors.map((color, index) => (\r\n              <div\r\n                onClick={() => setSelectedColorIndex(index)}\r\n                key={index}\r\n                style={{\r\n                  width: 13,\r\n                  height: 13,\r\n                  borderRadius: \"50%\",\r\n                  backgroundColor: `#${color}`,\r\n                  cursor: \"pointer\",\r\n                  border: \"solid\",\r\n                  borderColor:\r\n                    // eslint-disable-next-line eqeqeq\r\n                    index == selectedColorIndex ? \"#102840\" : \"transparent\",\r\n                  borderWidth: \"2px\",\r\n                }}\r\n              />\r\n            ))}\r\n          </div>\r\n          <form onSubmit={handleSubmit} className=\"handle-card-inputs\">\r\n            {cardInputsData(hasWhatsapp, onClickWhatsappIcon).map(\r\n              (props, key) => (\r\n                <CustomInput\r\n                  key={key}\r\n                  onChange={({ target: { name, value } }) =>\r\n                    setCardData({ ...cardData, [name]: value })\r\n                  }\r\n                  value={cardData[props.name]}\r\n                  {...props}\r\n                />\r\n              )\r\n            )}\r\n            <CustomButton\r\n              text={isEditing ? \"Save\" : \"Create\"}\r\n              type=\"submit\"\r\n              style={\r\n                !isEditing ? { gridColumnStart: 1, gridColumnEnd: 3 } : null\r\n              }\r\n            />\r\n            {isEditing && (\r\n              <CustomButton\r\n                text=\"Delete\"\r\n                color=\"#EA4E4E\"\r\n                onClick={handleDelete}\r\n                type=\"reset\"\r\n              />\r\n            )}\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default HandleCard;\r\n"],"sourceRoot":""}